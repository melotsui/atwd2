<div #scrollMe></div>
<div class="modal-content ">
    <div class="modal-header">
        <h2 class="modal-title" id="confirmDeleteModalLabel">Edit</h2>
        <!-- <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> -->
        <h1><button type="button" class="btn-close" (click)="closeModal()"></button></h1>

    </div>
    <form [formGroup]="updateMarketForm" (ngSubmit)="onSubmit(updateMarketForm.value)">

        <div class="modal-body">
            <div class="input-group mb-2" style="display: none;">
                <span class="input-group-text col-sm-4" id="basic-addon1">Market ID</span>
                <input type="text" class="form-control col-sm-8" aria-describedby="basic-addon1" id="modalMarketID"
                    formControlName="modalMarketID" readonly>
            </div>
            <!-- Market Name -->
            <div class="input-group mb-2">
                <span class="input-group-text col-sm-4" id="basic-addon1">Market Name</span>
                <input type="text" id="modalName_e" formControlName="modalName_e" class="form-control"
                    [ngClass]="{'is-invalid': updateMarketForm.get('modalName_e')?.invalid && updateMarketForm.get('modalName_e')?.touched}">
                <div class="invalid-feedback"
                    *ngIf="updateMarketForm.get('modalName_e')?.invalid && updateMarketForm.get('modalName_e')?.touched">
                    Please provide a valid market name in English.
                </div>
            </div>
            <div class="input-group mb-2">
                <span class="input-group-text col-sm-4" id="basic-addon1">街市</span>
                <input type="text" id="modalName_c" formControlName="modalName_c" class="form-control"
                    [ngClass]="{'is-invalid': updateMarketForm.get('modalName_c')?.invalid && updateMarketForm.get('modalName_c')?.touched}">
                <div class="invalid-feedback"
                    *ngIf="updateMarketForm.get('modalName_c')?.invalid && updateMarketForm.get('modalName_c')?.touched">
                    Please provide a valid market name in Chinese.
                </div>
            </div>
            <!-- End Market Name -->
            <!-- Region -->
            <div class="input-group mb-2">
                <span class="input-group-text col-sm-4" id="basic-addon1">Region</span>
                <select class="form-select col-sm-9" aria-label="Default select example" (change)="onChangeRegion();"
                    id="modalRegion_e" formControlName="modalRegion_e"
                    [ngClass]="{'is-invalid': updateMarketForm.get('modalRegion_e')?.invalid && updateMarketForm.get('modalRegion_e')?.touched}">
                    <option selected value=""></option>
                    <option *ngFor="let item of region" [ngValue]="item.region_e">{{item.region_e}}</option>
                </select>
                <div class="invalid-feedback"
                    *ngIf="updateMarketForm.get('modalRegion_e')?.invalid && updateMarketForm.get('modalRegion_e')?.touched">
                    Please select a region.
                </div>
            </div>
            <div class="input-group mb-2">
                <span class="input-group-text col-sm-4" id="basic-addon1">區域</span>
                <input type="text" class="form-control col-sm-8" aria-describedby="basic-addon1" id="modalRegion_c"
                    style="background-color:#f8f9fa;" formControlName="modalRegion_c" readonly>
            </div>
            <!-- End Region -->
            <!-- District -->
            <div *ngIf="updateMarketForm.value.modalRegion_e != ''">
                <div class="input-group mb-2">
                    <span class="input-group-text col-sm-4" id="basic-addon1">District</span>
                    <select class="form-select col-sm-9" aria-label="Default select example"
                        (change)="onChangeDistrict();" id="modalDistrict_e" formControlName="modalDistrict_e"
                        [ngClass]="{'is-invalid': updateMarketForm.get('modalDistrict_e')?.invalid && updateMarketForm.get('modalDistrict_e')?.touched}">
                        <option selected value=""></option>
                        <option *ngFor="let item of district" [ngValue]="item.District_e">{{item.District_e}}</option>
                    </select>
                    <div class="invalid-feedback"
                        *ngIf="updateMarketForm.get('modalDistrict_e')?.invalid && updateMarketForm.get('modalDistrict_e')?.touched">
                        Please select a district.
                    </div>
                </div>
                <div class="input-group mb-2">
                    <span class="input-group-text col-sm-4" id="basic-addon1">地區</span>
                    <input type="text" class="form-control col-sm-8" aria-describedby="basic-addon1"
                        id="modalDistrict_c" style="background-color:#f8f9fa;" formControlName="modalDistrict_c"
                        readonly>
                </div>
            </div>
            <!-- End District -->
            <!-- Address -->
            <div class="input-group mb-2">
                <span class="input-group-text col-sm-4" id="basic-addon1">Address</span>
                <input type="text" id="modalAddress_e" formControlName="modalAddress_e" class="form-control"
                    [ngClass]="{'is-invalid': updateMarketForm.get('modalAddress_e')?.invalid && updateMarketForm.get('modalAddress_e')?.touched}">
                <div class="invalid-feedback"
                    *ngIf="updateMarketForm.get('modalAddress_e')?.invalid && updateMarketForm.get('modalAddress_e')?.touched">
                    Please provide a valid address in English.
                </div>
            </div>
            <div class="input-group mb-2">
                <span class="input-group-text col-sm-4" id="basic-addon1">地址</span>
                <input type="text" id="modalAddress_c" formControlName="modalAddress_c" class="form-control"
                    [ngClass]="{'is-invalid': updateMarketForm.get('modalAddress_c')?.invalid && updateMarketForm.get('modalAddress_c')?.touched}">
                <div class="invalid-feedback"
                    *ngIf="updateMarketForm.get('modalAddress_c')?.invalid && updateMarketForm.get('modalAddress_c')?.touched">
                    Please provide a valid address in Chinese.
                </div>
            </div>
            <!-- End Address -->
            <!-- Business Hours -->
            <div class="input-group mb-2">
                <span class="input-group-text col-sm-4" id="basic-addon1">Business Hours</span>
                <input type="text" id="modalBH_e" formControlName="modalBH_e" class="form-control"
                    [ngClass]="{'is-invalid': updateMarketForm.get('modalBH_e')?.invalid && updateMarketForm.get('modalBH_e')?.touched}">
                <div class="invalid-feedback"
                    *ngIf="updateMarketForm.get('modalBH_e')?.invalid && updateMarketForm.get('modalBH_e')?.touched">
                    Please provide valid business hours in English.
                </div>
            </div>
            <div class="input-group mb-2">
                <span class="input-group-text col-sm-4" id="basic-addon1">營業時間</span>
                <input type="text" id="modalBH_c" formControlName="modalBH_c" class="form-control"
                    [ngClass]="{'is-invalid': updateMarketForm.get('modalBH_c')?.invalid && updateMarketForm.get('modalBH_c')?.touched}">
                <div class="invalid-feedback"
                    *ngIf="updateMarketForm.get('modalBH_c')?.invalid && updateMarketForm.get('modalBH_c')?.touched">
                    Please provide valid business hours in Chinese.
                </div>
            </div>
            <!-- End Business Hours -->
            <!-- Contact -->
            <div class="input-group mb-2">
                <span class="input-group-text col-sm-4" id="basic-addon1">Contact</span>
                <input type="text" id="modalContact1" formControlName="modalContact1" class="form-control"
                    [ngClass]="{'is-invalid': updateMarketForm.get('modalContact1')?.invalid && updateMarketForm.get('modalContact1')?.touched}">
                <input type="text" id="modalContact2" formControlName="modalContact2" class="form-control"
                    [ngClass]="{'is-invalid': updateMarketForm.get('modalContact2')?.invalid && updateMarketForm.get('modalContact2')?.touched}">
                <div class="invalid-feedback"
                    *ngIf="updateMarketForm.get('modalContact2')?.invalid && updateMarketForm.get('modalContact2')?.touched || updateMarketForm.get('modalContact1')?.invalid && updateMarketForm.get('modalContact1')?.touched">
                    Please provide a valid contact number.
                </div>
            </div>
            <!-- End Contact -->
            <div class="input-group mb-2">
                <span class="input-group-text col-sm-4" id="basic-addon1">Coordinate</span>
                <input type="text" class="form-control col-sm-8" aria-describedby="basic-addon1" id="modalCoordinate"
                    formControlName="modalCoordinate"
                    [ngClass]="{'is-invalid': updateMarketForm.get('modalCoordinate')?.invalid && updateMarketForm.get('modalCoordinate')?.touched}">
                <div class="invalid-feedback"
                    *ngIf="updateMarketForm.get('modalCoordinate')?.invalid && updateMarketForm.get('modalCoordinate')?.touched">
                    Please provide a valid coordinate.
                </div>

            </div>
            <!-- Tenancy Commodity -->
            <div class="row mb-3" *ngIf="tcList != null">
                <div class="col-sm-12" formGroupName="modal_tc">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th scope="col">Tenancy Commodity</th>
                                <th scope="col"></th>
                                <th scope="col">Nos Stall</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let item of tcList; let i = index" [formGroupName]="i">
                                <td>{{item['Tenancy_Commodity_e']}}</td>
                                <td>{{item['Tenancy_Commodity_c']}}</td>
                                <td><input type="number" class="form-control" formControlName="nos_stall"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <!-- End Tenancy Commodity -->
            <!-- Modal Button -->
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="btnModalCancel"
                    (click)="closeModal()">Cancel</button>
                <div style="padding-left: 15px;">
                    <button type="submit" class="btn btn-primary" id="modalUpdateButton">Update</button>
                </div>
                <!-- End Modal Button -->
            </div>
        </div>
    </form>
</div>